'use strict';Object.defineProperty(exports,'__esModule',{value:!0});function _interopDefault(a){return a&&'object'==typeof a&&'default'in a?a['default']:a}var React=require('react'),styled=require('styled-components'),styled__default=_interopDefault(styled),ALPHA=[' ','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'],NUMERIC=['0','1','2','3','4','5','6','7','8','9'],PUNCTUATION=['!','@','#','$','(',')','^','-','_','+','&','=',';',':','*','\'','"',',','.','<','>','/','\\','?','\xB0','%'],Text=/*#__PURE__*/styled__default.div.withConfig({displayName:'Text'})(['background:',';background-clip:text;-webkit-background-clip:text;text-fill-color:transparent;'],function(a){var b=a.position,c=a.color;return'top'===b?'linear-gradient('+c+' 50%, transparent 50%)':'linear-gradient(transparent 50%, '+c+' 50%)'}),Text$1=function(a){var b=a.children,c=a.color,d=a.position;return React.createElement(Text,{position:d,color:c},b)},HalfPanel=/*#__PURE__*/styled__default.div.withConfig({displayName:'Panel__HalfPanel'})(['position:',';overflow:hidden;'],function(a){var b=a.position;return'top'===b?'relative':'absolute'}),Panel=function(a){var b=a.background,c=a.position,d=a.textColor,e=a.value;return React.createElement(HalfPanel,{color:b,position:c},React.createElement(Text$1,{position:c,color:d},e))},FlipIn=/*#__PURE__*/styled.keyframes(['0%{transform:rotateX(-90deg);}50%{transform:rotateX(-90deg);}100%{transform:rotateX(0deg);}']),FlipOut=/*#__PURE__*/styled.keyframes(['0%{transform:rotateX(0deg);}50%{transform:rotateX(90deg);}100%{transform:rotateX(90deg);}']),HalfFlipPanel=/*#__PURE__*/styled__default(HalfPanel).withConfig({displayName:'Panel__HalfFlipPanel'})(['position:absolute;animation-name:',';animation-timing-function:linear;animation-fill-mode:forwards;animation-duration:',';background:',';opacity:1;z-index:1;'],function(a){var b=a.direction;return'in'===b?FlipIn:FlipOut},function(a){var b=a.duration;return b+'s'},function(a){var b=a.color,c=a.direction;return'out'===c?'linear-gradient('+b+' 50%, transparent 50%)':'linear-gradient(transparent 50%, '+b+' 50%)'}),FlipPanel=function(a){var b=a.background,c=a.direction,d=a.duration,e=a.position,f=a.textColor,g=a.value;return React.createElement(HalfFlipPanel,{direction:c,duration:d,color:b,position:e},React.createElement(Text$1,{position:e,color:f},g))},Character=/*#__PURE__*/styled__default.div.withConfig({displayName:'Character'})(['background:',';display:flex;justify-content:center;width:',';padding:0.5em;position:relative;&:after{content:\' \';position:absolute;top:0;left:0;width:100%;height:50%;border-bottom:',';}'],function(a){var b=a.background;return b},function(a){var b=a.characterWidth;return b||'initial'},function(a){var b=a.background,c=a.borderWidth;return b+' '+c+' solid'}),SplitFlapCharacter=function(a){var b=a.background,c=a.borderWidth,d=a.characterWidth,e=a.prevValue,f=a.step,g=a.textColor,h=a.value;return React.createElement(Character,{background:b,borderWidth:c,characterWidth:d},React.createElement(Panel,{position:'top',background:b,textColor:g,value:h}),React.createElement(Panel,{position:'bottom',background:b,textColor:g,value:e}),e!==h&&React.createElement(FlipPanel,{direction:'out',duration:f/1e3,position:'top',background:b,textColor:g,value:e}),e!==h&&React.createElement(FlipPanel,{direction:'in',duration:f/1e3,position:'bottom',background:b,textColor:g,value:h}))},classCallCheck=function(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')},createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),inherits=function(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)},possibleConstructorReturn=function(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a},toConsumableArray=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)},Wrapper=/*#__PURE__*/styled__default.div.withConfig({displayName:'SplitFlapDisplay__Wrapper'})(['display:flex;color:',';font-size:',';> *{&:not(:first-child){border-left:',';}}'],function(a){var b=a.color;return b},function(a){var b=a.fontSize;return b},function(a){var b=a.borderColor,c=a.borderWidth;return b+' '+c+' solid'}),SplitFlapDisplay=function(a){function b(a){classCallCheck(this,b);var c=possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));c.escapeValue=function(a,b){return a.split('').map(function(a){return b.includes(a)?a:b[0]}).join('')},c.getMinLengthFill=function(a){var b=a||'',d=c.props,e=d.characterSet,f=d.minLength;return f&&b.length<f?Array(f-b.length).fill(e[0]):[]},c.updateValue=function(){if(!(c.updateTimer||c.state.prevValue===c.state.escapedFinalValue)){c.setState({prevValue:c.state.currValue});var a=c.state.currValue.split(''),b=c.state.escapedFinalValue.split(''),d=b.map(function(b,d){var e=c.props.characterSet,f=a[d],g=e.indexOf(f),h=f!==b&&(0!==g||e.includes(b))?e[(g+1)%e.length]:f;return h}).join('');c.setState({currValue:d}),c.updateTimer=setTimeout(function(){c.updateTimer=null,c.updateValue()},c.props.step)}};var d=Array(a.value.length).fill(a.characterSet[0]).join('');return c.state={currValue:d,escapedFinalValue:c.escapeValue(a.value,a.characterSet),prevValue:d},c}return inherits(b,a),createClass(b,[{key:'componentDidMount',value:function(){this.updateValue()}},{key:'componentWillReceiveProps',value:function(a){if(a.value!==this.props.value){var b=this.escapeValue(a.value,a.characterSet);this.setState({escapedFinalValue:b})}}},{key:'componentDidUpdate',value:function(a){a.value!==this.props.value&&this.updateValue()}},{key:'componentWillUnmount',value:function(){this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}},{key:'render',value:function(){var a,b,c=this.props,d=c.background,e=c.borderColor,f=c.borderWidth,g=c.characterWidth,h=c.fontSize,i=c.padDirection,j=c.step,k=c.textColor,l=this.state,m=l.currValue,n=l.prevValue;return'right'===i?(a=[].concat(toConsumableArray(n.split('')),toConsumableArray(this.getMinLengthFill(n))),b=[].concat(toConsumableArray(m.split('')),toConsumableArray(this.getMinLengthFill(m)))):(a=[].concat(toConsumableArray(this.getMinLengthFill(n)),toConsumableArray(n.split(''))),b=[].concat(toConsumableArray(this.getMinLengthFill(m)),toConsumableArray(m.split('')))),React.createElement(Wrapper,{borderColor:e,borderWidth:f,color:k,fontSize:h},a.map(function(a,c){return React.createElement(SplitFlapCharacter,{key:'split-flap-'+c,background:d,borderWidth:f,characterWidth:g,prevValue:' '===a?'\u2007':a,step:j,textColor:k,value:' '===b[c]?'\u2007':b[c]})}))}}]),b}(React.Component);/*       *//*       *//*       *//*       *//* eslint-disable indent *//* eslint-enable indent *//*       *//**
 * @class SplitFlapDisplay
 *//* eslint-disable indent *//* eslint-enable indent */SplitFlapDisplay.ALPHA=ALPHA,SplitFlapDisplay.NUMERIC=NUMERIC,SplitFlapDisplay.PUNCTUATION=PUNCTUATION,SplitFlapDisplay.defaultProps={background:'#000000',borderColor:'#dddddd',borderWidth:'1px',fontSize:'1em',padDirection:'left',step:200,textColor:'#dddddd'},exports['default']=SplitFlapDisplay,exports.ALPHA=ALPHA,exports.NUMERIC=NUMERIC,exports.PUNCTUATION=PUNCTUATION;
