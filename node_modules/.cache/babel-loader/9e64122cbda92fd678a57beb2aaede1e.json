{"ast":null,"code":"import { Component, createElement } from 'react';\nimport styled, { keyframes } from 'styled-components';\n/*       */\n\nvar ALPHA = [' ', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'],\n    NUMERIC = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'],\n    PUNCTUATION = ['!', '@', '#', '$', '(', ')', '^', '-', '_', '+', '&', '=', ';', ':', '*', '\\'', '\"', ',', '.', '<', '>', '/', '\\\\', '?', '\\xB0', '%'],\n    Text =\n/*#__PURE__*/\nstyled.div.withConfig({\n  displayName: 'Text'\n})(['background:', ';background-clip:text;-webkit-background-clip:text;text-fill-color:transparent;'], function (a) {\n  var b = a.position,\n      c = a.color;\n  return 'top' === b ? 'linear-gradient(' + c + ' 50%, transparent 50%)' : 'linear-gradient(transparent 50%, ' + c + ' 50%)';\n}),\n    Text$1 = function (a) {\n  var b = a.children,\n      c = a.color,\n      d = a.position;\n  return createElement(Text, {\n    position: d,\n    color: c\n  }, b);\n},\n    HalfPanel =\n/*#__PURE__*/\nstyled.div.withConfig({\n  displayName: 'Panel__HalfPanel'\n})(['position:', ';overflow:hidden;'], function (a) {\n  var b = a.position;\n  return 'top' === b ? 'relative' : 'absolute';\n}),\n    Panel = function (a) {\n  var b = a.background,\n      c = a.position,\n      d = a.textColor,\n      e = a.value;\n  return createElement(HalfPanel, {\n    color: b,\n    position: c\n  }, createElement(Text$1, {\n    position: c,\n    color: d\n  }, e));\n},\n    FlipIn =\n/*#__PURE__*/\nkeyframes(['0%{transform:rotateX(-90deg);}50%{transform:rotateX(-90deg);}100%{transform:rotateX(0deg);}']),\n    FlipOut =\n/*#__PURE__*/\nkeyframes(['0%{transform:rotateX(0deg);}50%{transform:rotateX(90deg);}100%{transform:rotateX(90deg);}']),\n    HalfFlipPanel =\n/*#__PURE__*/\nstyled(HalfPanel).withConfig({\n  displayName: 'Panel__HalfFlipPanel'\n})(['position:absolute;animation-name:', ';animation-timing-function:linear;animation-fill-mode:forwards;animation-duration:', ';background:', ';opacity:1;z-index:1;'], function (a) {\n  var b = a.direction;\n  return 'in' === b ? FlipIn : FlipOut;\n}, function (a) {\n  var b = a.duration;\n  return b + 's';\n}, function (a) {\n  var b = a.color,\n      c = a.direction;\n  return 'out' === c ? 'linear-gradient(' + b + ' 50%, transparent 50%)' : 'linear-gradient(transparent 50%, ' + b + ' 50%)';\n}),\n    FlipPanel = function (a) {\n  var b = a.background,\n      c = a.direction,\n      d = a.duration,\n      e = a.position,\n      f = a.textColor,\n      g = a.value;\n  return createElement(HalfFlipPanel, {\n    direction: c,\n    duration: d,\n    color: b,\n    position: e\n  }, createElement(Text$1, {\n    position: e,\n    color: f\n  }, g));\n},\n    Character =\n/*#__PURE__*/\nstyled.div.withConfig({\n  displayName: 'Character'\n})(['background:', ';display:flex;justify-content:center;width:', ';padding:0.5em;position:relative;&:after{content:\\' \\';position:absolute;top:0;left:0;width:100%;height:50%;border-bottom:', ';}'], function (a) {\n  var b = a.background;\n  return b;\n}, function (a) {\n  var b = a.characterWidth;\n  return b || 'initial';\n}, function (a) {\n  var b = a.background,\n      c = a.borderWidth;\n  return b + ' ' + c + ' solid';\n}),\n    SplitFlapCharacter = function (a) {\n  var b = a.background,\n      c = a.borderWidth,\n      d = a.characterWidth,\n      e = a.prevValue,\n      f = a.step,\n      g = a.textColor,\n      h = a.value;\n  return createElement(Character, {\n    background: b,\n    borderWidth: c,\n    characterWidth: d\n  }, createElement(Panel, {\n    position: 'top',\n    background: b,\n    textColor: g,\n    value: h\n  }), createElement(Panel, {\n    position: 'bottom',\n    background: b,\n    textColor: g,\n    value: e\n  }), e !== h && createElement(FlipPanel, {\n    direction: 'out',\n    duration: f / 1e3,\n    position: 'top',\n    background: b,\n    textColor: g,\n    value: e\n  }), e !== h && createElement(FlipPanel, {\n    direction: 'in',\n    duration: f / 1e3,\n    position: 'bottom',\n    background: b,\n    textColor: g,\n    value: h\n  }));\n},\n    classCallCheck = function (a, b) {\n  if (!(a instanceof b)) throw new TypeError('Cannot call a class as a function');\n},\n    createClass = function () {\n  function a(a, b) {\n    for (var c, d = 0; d < b.length; d++) c = b[d], c.enumerable = c.enumerable || !1, c.configurable = !0, 'value' in c && (c.writable = !0), Object.defineProperty(a, c.key, c);\n  }\n\n  return function (b, c, d) {\n    return c && a(b.prototype, c), d && a(b, d), b;\n  };\n}(),\n    inherits = function (a, b) {\n  if ('function' != typeof b && null !== b) throw new TypeError('Super expression must either be null or a function, not ' + typeof b);\n  a.prototype = Object.create(b && b.prototype, {\n    constructor: {\n      value: a,\n      enumerable: !1,\n      writable: !0,\n      configurable: !0\n    }\n  }), b && (Object.setPrototypeOf ? Object.setPrototypeOf(a, b) : a.__proto__ = b);\n},\n    possibleConstructorReturn = function (a, b) {\n  if (!a) throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called');\n  return b && ('object' == typeof b || 'function' == typeof b) ? b : a;\n},\n    toConsumableArray = function (a) {\n  if (Array.isArray(a)) {\n    for (var b = 0, c = Array(a.length); b < a.length; b++) c[b] = a[b];\n\n    return c;\n  }\n\n  return Array.from(a);\n},\n    Wrapper =\n/*#__PURE__*/\nstyled.div.withConfig({\n  displayName: 'SplitFlapDisplay__Wrapper'\n})(['display:flex;color:', ';font-size:', ';> *{&:not(:first-child){border-left:', ';}}'], function (a) {\n  var b = a.color;\n  return b;\n}, function (a) {\n  var b = a.fontSize;\n  return b;\n}, function (a) {\n  var b = a.borderColor,\n      c = a.borderWidth;\n  return b + ' ' + c + ' solid';\n}),\n    SplitFlapDisplay = function (a) {\n  function b(a) {\n    classCallCheck(this, b);\n    var c = possibleConstructorReturn(this, (b.__proto__ || Object.getPrototypeOf(b)).call(this, a));\n    c.escapeValue = function (a, b) {\n      return a.split('').map(function (a) {\n        return b.includes(a) ? a : b[0];\n      }).join('');\n    }, c.getMinLengthFill = function (a) {\n      var b = a || '',\n          d = c.props,\n          e = d.characterSet,\n          f = d.minLength;\n      return f && b.length < f ? Array(f - b.length).fill(e[0]) : [];\n    }, c.updateValue = function () {\n      if (!(c.updateTimer || c.state.prevValue === c.state.escapedFinalValue)) {\n        c.setState({\n          prevValue: c.state.currValue\n        });\n        var a = c.state.currValue.split(''),\n            b = c.state.escapedFinalValue.split(''),\n            d = b.map(function (b, d) {\n          var e = c.props.characterSet,\n              f = a[d],\n              g = e.indexOf(f),\n              h = f !== b && (0 !== g || e.includes(b)) ? e[(g + 1) % e.length] : f;\n          return h;\n        }).join('');\n        c.setState({\n          currValue: d\n        }), c.updateTimer = setTimeout(function () {\n          c.updateTimer = null, c.updateValue();\n        }, c.props.step);\n      }\n    };\n    var d = Array(a.value.length).fill(a.characterSet[0]).join('');\n    return c.state = {\n      currValue: d,\n      escapedFinalValue: c.escapeValue(a.value, a.characterSet),\n      prevValue: d\n    }, c;\n  }\n\n  return inherits(b, a), createClass(b, [{\n    key: 'componentDidMount',\n    value: function () {\n      this.updateValue();\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function (a) {\n      if (a.value !== this.props.value) {\n        var b = this.escapeValue(a.value, a.characterSet);\n        this.setState({\n          escapedFinalValue: b\n        });\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function (a) {\n      a.value !== this.props.value && this.updateValue();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function () {\n      this.updateTimer && (clearTimeout(this.updateTimer), this.updateTimer = null);\n    }\n  }, {\n    key: 'render',\n    value: function () {\n      var a,\n          b,\n          c = this.props,\n          d = c.background,\n          e = c.borderColor,\n          f = c.borderWidth,\n          g = c.characterWidth,\n          h = c.fontSize,\n          i = c.padDirection,\n          j = c.step,\n          k = c.textColor,\n          l = this.state,\n          m = l.currValue,\n          n = l.prevValue;\n      return 'right' === i ? (a = [].concat(toConsumableArray(n.split('')), toConsumableArray(this.getMinLengthFill(n))), b = [].concat(toConsumableArray(m.split('')), toConsumableArray(this.getMinLengthFill(m)))) : (a = [].concat(toConsumableArray(this.getMinLengthFill(n)), toConsumableArray(n.split(''))), b = [].concat(toConsumableArray(this.getMinLengthFill(m)), toConsumableArray(m.split('')))), createElement(Wrapper, {\n        borderColor: e,\n        borderWidth: f,\n        color: k,\n        fontSize: h\n      }, a.map(function (a, c) {\n        return createElement(SplitFlapCharacter, {\n          key: 'split-flap-' + c,\n          background: d,\n          borderWidth: f,\n          characterWidth: g,\n          prevValue: ' ' === a ? '\\u2007' : a,\n          step: j,\n          textColor: k,\n          value: ' ' === b[c] ? '\\u2007' : b[c]\n        });\n      }));\n    }\n  }]), b;\n}(Component);\n/*       */\n\n/*       */\n\n/*       */\n\n/* eslint-disable indent */\n\n/* eslint-enable indent */\n\n/*       */\n\n/**\n* @class SplitFlapDisplay\n*/\n\n/* eslint-disable indent */\n\n/* eslint-enable indent */\n\n\nSplitFlapDisplay.ALPHA = ALPHA, SplitFlapDisplay.NUMERIC = NUMERIC, SplitFlapDisplay.PUNCTUATION = PUNCTUATION, SplitFlapDisplay.defaultProps = {\n  background: '#000000',\n  borderColor: '#dddddd',\n  borderWidth: '1px',\n  fontSize: '1em',\n  padDirection: 'left',\n  step: 200,\n  textColor: '#dddddd'\n};\nexport { SplitFlapDisplay as default, ALPHA, NUMERIC, PUNCTUATION };","map":null,"metadata":{},"sourceType":"module"}