{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bacco/Desktop/FINAL/Top-100-Crypto-App-React FINAL-ONE.js/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/bacco/Desktop/FINAL/Top-100-Crypto-App-React FINAL-ONE.js/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/bacco/Desktop/FINAL/Top-100-Crypto-App-React FINAL-ONE.js/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/bacco/Desktop/FINAL/Top-100-Crypto-App-React FINAL-ONE.js/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/bacco/Desktop/FINAL/Top-100-Crypto-App-React FINAL-ONE.js/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/bacco/Desktop/FINAL/Top-100-Crypto-App-React FINAL-ONE.js/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/bacco/Desktop/FINAL/Top-100-Crypto-App-React FINAL-ONE.js/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{Component}from'react';import Table from'./components/Table';import Pagination from'./components/Pagination';import{helperPaginate}from'./helpers/helperPaginate';import InfiniteScroll from\"react-infinite-scroll-component\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(){var _getPrototypeOf2;var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(App)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={coins:[],count:16,starts:0,hasMore:true,counter:0};_this.componentDidMount=function(){_this.loadCoins();setInterval(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.loadMore();_this.updateCoins();case 2:case\"end\":return _context.stop();}}},_callee);})),25000);};_this.loadMore=function(){var _this$state=_this.state,starts=_this$state.starts,count=_this$state.count;var hasMoreHelper=true;if(starts>=56)hasMoreHelper=false;_this.setState({starts:starts+count,hasMore:hasMoreHelper});_this.loadCoins();// this.loadChart();\n};return _this;}_createClass(App,[{key:\"render\",value:function render(){var _this$state2=this.state,count=_this$state2.count,coins=_this$state2.coins,starts=_this$state2.starts,hasMore=_this$state2.hasMore,isReadyLoad=_this$state2.isReadyLoad;return React.createElement(\"div\",{className:\"wrap\"},React.createElement(InfiniteScroll,{next:this.loadMore,hasMore:hasMore,dataLength:coins.length,loader:React.createElement(\"div\",null,React.createElement(\"h4\",{className:\"loading\"},\"Loading...\"),React.createElement(\"div\",{className:\"pagesNum\"},starts+count))},React.createElement(\"div\",{className:\"table\"},React.createElement(Table,{input:coins,tableVisibility:isReadyLoad}))));}},{key:\"loadCoins\",value:function(){var _loadCoins=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this$state3,coins,starts,count,url,response,dataJSON;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$state3=this.state,coins=_this$state3.coins,starts=_this$state3.starts,count=_this$state3.count;url=\"/info?starts=\".concat(starts,\"&count=\").concat(count);_context2.prev=2;_context2.next=5;return fetch(url,{cache:\"no-store\"});case 5:response=_context2.sent;_context2.next=8;return response.json();case 8:dataJSON=_context2.sent;// console.log(response.status);\nthis.setState({coins:coins.concat(dataJSON)});// this.loadChart();\n_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);case 15:case\"end\":return _context2.stop();}}},_callee2,this,[[2,12]]);}));function loadCoins(){return _loadCoins.apply(this,arguments);}return loadCoins;}()// async loadChart() {\n// \tconsole.log('loadChart');\n// \t\tconst { coins , counter} = this.state;\n// \t\tconst url = '/instruments';\n// \ttry {\n// \t\tconst response = await fetch( url ); \n// \t\tconst dataJSON = await response.json();\n// \t\tif ( counter === 0 ) {\n// \t\t\tthis.setState({\n// \t\t\t\tcoins   : dataJSON,\n// \t\t\t\tcounter : counter + 1\n// \t\t\t});\n// \t\t} else {\n// \t\t\tthis.setState({\n// \t\t\t\tcoins   : coins.concat(dataJSON)\n// \t\t\t});\n// \t\t}\n// \t} catch (error) {\n// \t\tconsole.log(error)\n// \t}\n// }\t\n},{key:\"updateCoins\",value:function(){var _updateCoins=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var url,response,dataJSON;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:// console.log(\"change\")\nurl=\"/instruments\";_context3.prev=1;_context3.next=4;return fetch(url,{cache:\"no-store\"});case 4:response=_context3.sent;_context3.next=7;return response.json();case 7:dataJSON=_context3.sent;// console.log(response.status);\nthis.setState({coins:dataJSON});_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](1);console.log(_context3.t0);case 14:case\"end\":return _context3.stop();}}},_callee3,this,[[1,11]]);}));function updateCoins(){return _updateCoins.apply(this,arguments);}return updateCoins;}()}]);return App;}(Component);export{App as default};","map":{"version":3,"sources":["/Users/bacco/Desktop/FINAL/Top-100-Crypto-App-React FINAL-ONE.js/src/App.js"],"names":["React","Component","Table","Pagination","helperPaginate","InfiniteScroll","App","state","coins","count","starts","hasMore","counter","componentDidMount","loadCoins","setInterval","loadMore","updateCoins","hasMoreHelper","setState","isReadyLoad","length","url","fetch","cache","response","json","dataJSON","concat","console","log"],"mappings":"ghCAAA,MAAOA,CAAAA,KAAP,KAA+B,OAA/B,CACA,OAASC,SAAT,KAA+B,OAA/B,CACA,MAAOC,CAAAA,KAAP,KAA+B,oBAA/B,CACA,MAAUC,CAAAA,UAAV,KAA+B,yBAA/B,CACA,OAASC,cAAT,KAA+B,0BAA/B,CAEA,MAAOC,CAAAA,cAAP,KAA2B,iCAA3B,C,GAGqBC,CAAAA,G,mXAEpBC,K,CAAQ,CACPC,KAAK,CAAU,EADR,CAEPC,KAAK,CAAU,EAFR,CAGPC,MAAM,CAAS,CAHR,CAIPC,OAAO,CAAQ,IAJR,CAKPC,OAAO,CAAQ,CALR,C,OAmCRC,iB,CAAoB,UAAM,CAEzB,MAAKC,SAAL,GAGAC,WAAW,sEAAC,mIAEX,MAAKC,QAAL,GACC,MAAKC,WAAL,GAHU,sDAAD,GAKR,KALQ,CAAX,CAMA,C,OAGDD,Q,CAAW,UAAM,iBAEU,MAAKT,KAFf,CAERG,MAFQ,aAERA,MAFQ,CAEAD,KAFA,aAEAA,KAFA,CAIhB,GAAIS,CAAAA,aAAa,CAAG,IAApB,CACA,GAAKR,MAAM,EAAI,EAAf,CAAoBQ,aAAa,CAAG,KAAhB,CAEpB,MAAKC,QAAL,CAAgB,CACfT,MAAM,CAAIA,MAAM,CAAGD,KADJ,CAEfE,OAAO,CAAGO,aAFK,CAAhB,EAKA,MAAKJ,SAAL,GACA;AACA,C,sEAtDQ,kBAE+C,KAAKP,KAFpD,CAEAE,KAFA,cAEAA,KAFA,CAEOD,KAFP,cAEOA,KAFP,CAEcE,MAFd,cAEcA,MAFd,CAEsBC,OAFtB,cAEsBA,OAFtB,CAE+BS,WAF/B,cAE+BA,WAF/B,CAIR,MAEC,4BAAK,SAAS,CAAC,MAAf,EAEC,oBAAC,cAAD,EACC,IAAI,CAAY,KAAKJ,QADtB,CAEC,OAAO,CAASL,OAFjB,CAGC,UAAU,CAAMH,KAAK,CAACa,MAHvB,CAIC,MAAM,CAAU,+BACZ,0BAAI,SAAS,CAAC,SAAd,eADY,CAEZ,2BAAK,SAAS,CAAC,UAAf,EAA2BX,MAAM,CAAGD,KAApC,CAFY,CAJjB,EASC,2BAAK,SAAS,CAAC,OAAf,EACC,oBAAE,KAAF,EAAS,KAAK,CAAKD,KAAnB,CAA2B,eAAe,CAAKY,WAA/C,EADD,CATD,CAFD,CAFD,CAoBA,C,0TAkCkC,KAAKb,K,CAA9BC,K,cAAAA,K,CAAOE,M,cAAAA,M,CAAQD,K,cAAAA,K,CACjBa,G,wBAAsBZ,M,mBAAgBD,K,0CAGrBc,CAAAA,KAAK,CAACD,GAAD,CAAM,CAAEE,KAAK,CAAE,UAAT,CAAN,C,QAAtBC,Q,uCACiBA,CAAAA,QAAQ,CAACC,IAAT,E,QAAjBC,Q,gBAEN;AAEA,KAAKR,QAAL,CAAc,CACbX,KAAK,CAAGA,KAAK,CAACoB,MAAN,CAAaD,QAAb,CADK,CAAd,EAKA;qFAGAE,OAAO,CAACC,GAAR,e,4JAIF;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;iRAID;AACSR,G,CAAM,c,yCAGWC,CAAAA,KAAK,CAACD,GAAD,CAAM,CAAEE,KAAK,CAAE,UAAT,CAAN,C,QAAtBC,Q,uCACiBA,CAAAA,QAAQ,CAACC,IAAT,E,QAAjBC,Q,gBAEN;AAEA,KAAKR,QAAL,CAAc,CACbX,KAAK,CAAEmB,QADM,CAAd,E,qFAKAE,OAAO,CAACC,GAAR,e,mLArI8B7B,S,SAAZK,G","sourcesContent":["import React              from 'react';\nimport { Component }      from 'react';\nimport Table              from './components/Table';\nimport    Pagination      from './components/Pagination';\nimport { helperPaginate } from './helpers/helperPaginate'\n\nimport InfiniteScroll from \"react-infinite-scroll-component\";\n\n\nexport default class App extends Component{\n     \n\tstate = {\n\t\tcoins       :  [],\n\t\tcount       :  16,\n\t\tstarts      :  0,\n\t\thasMore     :  true,\n\t\tcounter     :  0\n\t}\n\t\n\t\n\trender() {\n\t\t\n\t\tconst { count, coins, starts, hasMore, isReadyLoad } = this.state;\n\n\t\treturn (\n\n\t\t\t<div className='wrap'>\n\n\t\t\t\t<InfiniteScroll\n\t\t\t\t\tnext       =  { this.loadMore }\n\t\t\t\t\thasMore    =  { hasMore }\n\t\t\t\t\tdataLength =  { coins.length }\n\t\t\t\t\tloader     =  { <div>\n\t\t\t\t\t\t\t\t\t<h4 className='loading'>Loading...</h4>\n\t\t\t\t\t\t\t\t\t<div className='pagesNum'>{starts + count}</div>\n\t\t\t\t\t\t\t\t</div> }\n\t\t\t\t>\n\t\t\t\t\t<div className='table'>\n\t\t\t\t\t\t< Table  input = { coins } tableVisibility = { isReadyLoad }/>\n\t\t\t\t\t</div>\n\n\t\t\t\t</InfiniteScroll>\n\t\t\t</div>\n\t\t)\n\t}\n\t\n\tcomponentDidMount = () => {\n\n\t\tthis.loadCoins();\n\t\t\n\t\t\n\t\tsetInterval(async () => {\n\n\t\t\tthis.loadMore() \n\t\t\t this.updateCoins();\n\t\t\t \n\t\t}, 25000);\n\t}\n\t\n\n\tloadMore = () => {\n\n\t\tconst { starts, count } = this.state;\n\n\t\tlet hasMoreHelper = true;\n\t\tif ( starts >= 56 ) hasMoreHelper = false;\n\n\t\tthis.setState( ({\n\t\t\tstarts  : starts + count,\n\t\t\thasMore : hasMoreHelper,\n\t\t}))\n\n\t\tthis.loadCoins();\n\t\t// this.loadChart();\n\t}\n\t\n\tasync  loadCoins() {\n\n\t\t\tconst { coins, starts, count } = this.state;\n\t\t\tconst url = `/info?starts=${starts}&count=${count}`;\n\t\ttry {\n\n\t\t\tconst response = await fetch(url, { cache: \"no-store\" }); \n\t\t\tconst dataJSON = await response.json();\n\t\t\t\n\t\t\t// console.log(response.status);\n\n\t\t\tthis.setState({\n\t\t\t\tcoins : coins.concat(dataJSON),\n\t\t\t\t\n\t\t\t});\n\n\t\t\t// this.loadChart();\n\n\t\t} catch (error) {\n\t\t\tconsole.log(error)\n\t\t}\n\t}\n\n\t// async loadChart() {\n\n\t// \tconsole.log('loadChart');\n\n\t// \t\tconst { coins , counter} = this.state;\n\t// \t\tconst url = '/instruments';\n\t// \ttry {\n\t// \t\tconst response = await fetch( url ); \n\t// \t\tconst dataJSON = await response.json();\n\n\t// \t\tif ( counter === 0 ) {\n\t// \t\t\tthis.setState({\n\t// \t\t\t\tcoins   : dataJSON,\n\t// \t\t\t\tcounter : counter + 1\n\t// \t\t\t});\n\t// \t\t} else {\n\t// \t\t\tthis.setState({\n\t// \t\t\t\tcoins   : coins.concat(dataJSON)\n\t// \t\t\t});\n\t// \t\t}\n\t\t\t\n\n\t// \t} catch (error) {\n\t// \t\tconsole.log(error)\n\t// \t}\n\t// }\t\n\n\n\tasync  updateCoins() {\n// console.log(\"change\")\n\t\t\tconst url = \"/instruments\";\n\t\ttry {\n\n\t\t\tconst response = await fetch(url, { cache: \"no-store\" });\n\t\t\tconst dataJSON = await response.json();\n\t\t\t\n\t\t\t// console.log(response.status);\n\n\t\t\tthis.setState({\n\t\t\t\tcoins: dataJSON\n\t\t\t});\n\t\t} catch (error) {\n\n\t\t\tconsole.log(error)\n\t\t}\n\t}\n}\n\n\n"]},"metadata":{},"sourceType":"module"}